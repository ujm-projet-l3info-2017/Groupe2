<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr">

  <head>
    <title>{{ title }}</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" media="all" href="/static/stylesheets/bootstrap.css?body=1"/>
    <script src="/static/js/jquery-1.10.2.js" type="text/javascript"></script>
    <script src="/static/js/bootstrap.js" type="text/javascript"></script>
  </head>

  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Garden Projects</a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown user-dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <span class="glyphicon  glyphicon-user"></span> {{ user.login }}<b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
{% if user.is_logged %}
                <li><a href="/home"><span class="glyphicon glyphicon-home"></span> home</a></li>
                <li><a href="/account"><span class="glyphicon glyphicon-cog"></span> settings</a></li>
                <li><a href="/logout"><span class="glyphicon glyphicon-log-out"></span> logout</a></li>
{% else %}
                <li><a data-toggle="modal" href="#login_form"><span class="glyphicon glyphicon-log-in"></span> login</a></li>
                <li><a data-toggle="modal" href="#register_form"><span class="glyphicon glyphicon-check"></span> register</a></li>
{% endif %}
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container" style="padding-top:100px;min-height:550px;">

{% if error %}
      <div class="container">
        <div id="flash_notice" class="col-xs-4 col-xs-push-4">
          <button type="button" class="close" onclick='$("#flash_notice").hide()'>&times;</button>
          <div class="alert alert-success" style="text-align:center">
            <p id="alert_info_text" style="text-align: left;">{{ error }}</p>
          </div>
        </div>
      </div>
{% endif %}
{% block content %}
{% endblock %}
    </div>
  
    <div class="container">
      <hr>
      <footer>
        <div class="row">
          <div class="col-lg-12">
            <p>Created with love by azerty - Under <a href="https://www.gnu.org/copyleft/gpl.html">GNU GPL</a>
          </div>
        </div>
      </footer>
    </div>

{% if user.is_logged is False %}
    <div class="modal fade" id="login_form" tabindex="-1" role="dialog" aria-labelledby="loginLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Login</h4>
          </div>
          <div class="modal-body">
            <form id="formLogin" action="/login" method="post">
              {% csrf_token %}
              <div class="input-group">
                <span class="input-group-addon">login</span>
                <input type="text" name="login" class="form-control" placeholder="Username">
              </div>
              <br />
              <div class="input-group">
                <span class="input-group-addon">password</span>
                <input type="password" id="user_password" name="password" class="form-control" placeholder="password">
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" onclick="$('#formLogin').submit()">Login</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="register_form" tabindex="-1" role="dialog" aria-labelledby="loginLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Register</h4>
          </div>
          <div class="modal-body">
            <form id="formRegister" action="/register" method="post">
              {% csrf_token %}
              <div class="input-group">
                <span class="input-group-addon">login</span>
                <input type="text" name="login" class="form-control" placeholder="Username">
              </div>
              <br />
              <div class="input-group">
                <span class="input-group-addon">m@il</span>
                <input required AUTOCOMPLETE='OFF' type="email" id="register_user_mail"
                  name="mail" class="form-control" placeholder="mail">
              </div>
              <br />
              <div class="input-group">
                <span class="input-group-addon">password</span>
                <input required AUTOCOMPLETE='OFF' type="password" id="register_user_password"
                  name="password" class="form-control" placeholder="password"
                  onchange="$('#register_user_password_verif')[0].pattern=this.value;">
              </div>
              <br />
              <div class="input-group">
                <span class="input-group-addon">password</span>
                <input AUTOCOMPLETE='OFF' type="password" id="register_user_password_verif"
                  name="password" class="form-control" placeholder="password (verification)">
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" onclick="$('#formRegister').submit()">Register</button>
          </div>
        </div>
      </div>
    </div>
{% endif %}
  </body>

</html>